---
name: Electrum

description: Полное руководство по Electrum, от новичка до профессионала
---

![cover](assets/cover.webp)

Описание для Electrum

https://twitter.com/ElectrumWallet
https://electrum.org/
https://electrum.readthedocs.io/

> "Должен сказать, когда я наткнулся на это руководство, я был поражен. Поздравляю Армана Пармана с этим. Было бы стыдно не разместить его здесь и не перевести на максимальное количество языков. Честно говоря, этому парню стоит дать чаевые." Rogzy

Оригинальный пост:

![Electrum Desktop Wallet (Mac / Linux) - скачивание, проверка, подключение к вашему узлу.](https://youtu.be/wHmQNcRWdHM)

![Совершение транзакции в Bitcoin с помощью Electrum](https://youtu.be/-d_Zd7VcAfQ)

## Почему Electrum?

Это подробное руководство о том, как использовать Bitcoin-кошелек Electrum, с решениями всех его подводных камней и особенностей - то, что я разработал после нескольких лет использования и обучения студентов безопасности и конфиденциальности в Bitcoin. Electrum не лучший Bitcoin-кошелек для тех, кто хочет держать все максимально просто и предпочитает оставаться на начальном уровне. Вместо этого, он предназначен для тех, кто является или стремится стать "продвинутым" пользователем.

Для новичка в мире Bitcoin он отлично подходит только под руководством опытного пользователя, который покажет им путь. Если учиться пользоваться им самостоятельно, это будет безопасно, при условии, что они будут тратить свое время и использовать его в тестовой среде только с небольшим количеством сатоши сначала. Это руководство поддерживает это начинание, но оно также является хорошим справочником для всех остальных.

> Предупреждение: Это руководство большое. Не пытайтесь сделать все это за один день. Лучше всего сохранить руководство и постепенно прорабатывать его со временем.

## Скачивание Electrum

В идеале, используйте отдельный компьютер для Bitcoin-транзакций (Мое руководство для этого https://armantheparman.com/mint/) _(ТАКЖЕ доступно в разделе конфиденциальности)_. Нормально практиковаться с небольшими суммами на "грязном" компьютере, когда вы только учитесь (кто знает, сколько скрытого вредоносного ПО накопил ваш обычный компьютер за годы – вы не хотите подвергать свои Bitcoin-кошельки этому риску).

Получите Electrum с https://electrum.org/.

Нажмите на вкладку Скачать в верхней части.

Нажмите на ссылку для скачивания, которая соответствует вашему компьютеру. Любой компьютер на Linux или Mac может использовать ссылку Python (красный круг). Компьютер на Linux с чипом Intel или AMD может использовать Appimage (зеленый круг; это как исполняемый файл Windows). Устройство Raspberry Pi имеет микропроцессор ARM и может использовать только версию Python (красный круг), а не Appimage, хотя Pi работает на Linux. Синий круг предназначен для Windows, а черный круг - для Mac.

![image](assets/1.webp)

## Проверка Electrum

Цель "проверки" скачивания - убедиться, что ни один бит данных не был изменен. Это предотвращает использование "взломанной" вредоносной версии программного обеспечения. Можно пропустить этот шаг, если вы используете скачанную копию только для практики, т.е. не используете кошельки, в которых хранятся серьезные суммы денег. Затем, когда вы будете готовы использовать Electrum для ваших реальных средств, вам следует удалить вашу копию и начать сначала, на этот раз проверив вашу загрузку.
Для этого мы используем инструменты криптографии с открытым/закрытым ключом – gpg, о которых мы написали руководство здесь (https://armantheparman.com/gpg/). Инструмент gpg поставляется со всеми операционными системами Linux. Для Mac и Windows смотрите ссылку gpg для инструкций по загрузке.
В дополнение к загрузке программного обеспечения Electrum, для обеспечения безопасности, вам также понадобится цифровая ПОДПИСЬ программного обеспечения. Это строка текста (на самом деле это число, закодированное с использованием текста), которое разработчик создал с помощью своего ЗАКРЫТОГО ключа gpg. Используя программу gpg, мы можем затем «проверить» ПОДПИСЬ с его ОТКРЫТЫМ ключом (созданным из закрытого ключа разработчика), к которому у всех есть доступ, в сравнении с загружаемым ФАЙЛОМ.

Другими словами, с тремя входными данными (подпись, открытый ключ и файл данных) мы получаем результат true или false, чтобы подтвердить, что файл не был подделан.

Чтобы получить подпись, кликните по ссылке, соответствующей файлу, который вы загрузили (см. цветные стрелки):

![image](assets/2.webp)

Клик по ссылке может автоматически загрузить файл в вашу папку загрузок, или он может открыться в браузере. Если он открывается в браузере, вам нужно сохранить файл. Вы можете щелкнуть правой кнопкой мыши и выбрать «сохранить как». В зависимости от операционной системы или браузера, вам может потребоваться щелкнуть правой кнопкой мыши по пустому пространству, а не по тексту.

Ниже представлен вид загруженного текста. Вы можете видеть, что есть несколько подписей – это подписи разных людей. Вы можете проверить каждую из них или любую. Я покажу вам, как проверить только подпись разработчика.

![image](assets/3.webp)

Далее, вам нужно получить открытый ключ ThomasV – он основной разработчик. Вы можете получить его напрямую от него, с его аккаунта Keybase, Github, или от кого-то еще, с сервера ключей, или с веб-сайта Electrum.

Получение его с веб-сайта Electrum на самом деле является наименее безопасным способом, потому что если этот веб-сайт злонамерен (именно это мы и проверяем), почему мы получаем открытый ключ с него (открытый ключ может быть поддельным)?

Чтобы пока упростить, я всё равно покажу вам, как получить его с веб-сайта, но имейте это в виду. Вот копия (https://github.com/spesmilo/electrum/blob/master/pubkeys/ThomasV.asc) на GitHub, с которой вы можете сравнить.

Прокрутите страницу немного вниз, чтобы найти ссылку на открытый ключ ThomasV (ниже красный круг). Кликните по ней и загрузите, или если откроется некоторый текст в браузере, щелкните правой кнопкой мыши, чтобы сохранить.

![image](assets/4.webp)

Теперь у вас есть 3 новых файла, вероятно, все в папке загрузок. Не имеет значения, где они находятся, но процесс становится проще, если вы поместите их все в одну папку.

Три файла:

1. Загрузка Electrum
2. Файл подписи (обычно это тот же файл, что и загрузка Electrum с добавлением ".asc")
3. Открытый ключ ThomasV.

Откройте терминал на Mac или Linux, или командную строку (CMD) в Windows.

Перейдите в директорию Загрузки (или куда бы вы ни поместили три файла). Если вы не знаете, что это значит, узнайте из этого короткого видео для Linux/Mac (https://www.youtube.com/watch?v=AO0jzD1hpXc) и этого для Windows (https://www.youtube.com/watch?v=9zMWXD-xoxc). Помните, что в компьютерах Linux имена директорий чувствительны к регистру.
В терминале введите это, чтобы импортировать публичный ключ ThomasV в "ключницу" вашего компьютера (ключница - это абстрактное понятие, на самом деле это просто файл на вашем компьютере):
```bash
gpg --import ThomasV.asc
```

Убедитесь, что имя файла совпадает с тем, что вы загрузили. Также обратите внимание, что это двойное тире, а не одинарное. Кроме того, обратите внимание, что перед и после "--import" есть пробел. Затем нажмите <enter>.

Файл должен импортироваться. Если вы получите ошибку, проверьте, находитесь ли вы в директории, где файл действительно существует. Чтобы проверить, в какой директории вы находитесь (на Mac или Linux), введите pwd. Чтобы увидеть, какие файлы находятся в директории, в которой вы находитесь (на Mac или Linux), введите ls. Вы должны увидеть текстовый файл "ThomasV.asc", возможно, среди других файлов.

Затем мы запускаем команду для проверки подписи.

```bash
gpg --verify Electrum-4.1.5.tar.gz.asc Electrum-4.1.5.tar.gz
```

Обратите внимание, здесь есть 4 "элемента", каждый из которых разделен пробелом. Я выделил текст поочередно, чтобы помочь вам увидеть. Четыре элемента это:

1. программа gpg
2. опция --verify
3. имя файла подписи
4. имя файла программы

Интересно, что иногда вы можете опустить 4-й элемент, и компьютер догадается, что вы имеете в виду. Я не уверен, но я думаю, это работает только если имена файлов отличаются только "asc" в конце.

Не просто копируйте имена файлов, которые я здесь показал - убедитесь, что они совпадают с именем файла, который у вас есть в системе.

Нажмите <enter>, чтобы запустить команду. Вы должны увидеть "хорошую подпись от ThomasV", что указывает на успех. Будут некоторые ошибки, потому что у нас нет публичных ключей для подписей других людей, которые содержатся в файле подписи (эта система объединения подписей в одном файле может измениться в последующих версиях). Также внизу будет предупреждение, которое мы можем игнорировать (это предупреждает нас о том, что мы не сообщили компьютеру, что мы доверяем публичному ключу ThomasV).

Теперь у нас есть проверенная копия Electrum, которую безопасно использовать.

## Запуск Electrum

### Запуск Electrum, если используется Python

Если вы загрузили версию для Python, вот как ее заставить работать. На странице загрузки вы увидите это:

![image](assets/5.webp)

Для Linux хорошей идеей будет сначала обновить вашу систему:

```bash
sudo apt-get update
sudo apt-get upgrade
```

Скопируйте выделенный желтым текст, вставьте его в терминал и нажмите <enter>. Вас попросят ввести пароль, возможно, подтверждение для продолжения, а затем будут установлены эти файлы («зависимости»).

Вам также потребуется извлечь сжатый файл в директорию по вашему выбору. Это можно сделать с помощью графического интерфейса или из командной строки (команда, выделенная розовым) - помните, что имена ваших файлов могут отличаться. (Обратите внимание, что когда мы проверяли загрузку в предыдущем разделе, мы проверяли zip-файл, а не извлеченную директорию.)

Есть опция «установки» с использованием программы PIP, но это необязательно и добавляет дополнительные шаги и установку файлов. Просто запустите программу с помощью терминала, чтобы обойти все это.

Шаги (Linux) следующие:

1. перейдите в директорию, где извлечены файлы
2. введите: ./run_electrum

На Mac шаги те же, но возможно, сначала потребуется установить Python3 и использовать эту команду для запуска:

```bash
```python3 ./run_electrum```

Как только Electrum запущен, окно терминала останется открытым. Если вы его закроете, программа Electrum завершит работу. Просто сверните его, пока используете Electrum.

### Запуск Electrum с помощью Appimage

Это немного проще, но не так удобно, как исполняемый файл Windows. В зависимости от версии Linux, которую вы используете, по умолчанию файлы Appimage могут иметь атрибуты, установленные таким образом, что система не разрешает их выполнение. Нам нужно это изменить. Если ваш Appimage работает, вы можете пропустить этот шаг. Перейдите в каталог с файлом через терминал, затем выполните эту команду:

```bash
sudo chmod ug+x Electrum-4.1.5-x86_64.AppImage
```

“sudo” предоставляет привилегии суперпользователя; “chmod” - это команда для изменения режима, изменяющая, кто может читать, писать или выполнять; “ug+x” означает, что мы изменяем пользователя и группу для разрешения выполнения.

Измените имя файла, чтобы оно соответствовало вашей версии.

Затем Electrum будет запущен двойным кликом по иконке Appimage.

### Запуск Electrum на Mac

Просто дважды щелкните загруженный файл (это «диск»). Откроется окно. Перетащите иконку Electrum из окна на рабочий стол или куда вы хотите сохранить программу. Затем вы можете «извлечь» диск и удалить диск (загруженный файл).

Чтобы запустить программу, просто дважды щелкните по ней. Возможно, появятся некоторые специфические для Mac ошибки, которые нужно будет обойти.

### Запуск Electrum на Windows

Несмотря на то, что Windows мне нравится меньше всего, это самый простой метод. Просто дважды щелкните исполняемый файл, чтобы запустить.

## Начните с тестового кошелька

Когда вы впервые загружаете Electrum, откроется окно, как это:

![image](assets/6.webp)

Позже мы выберем ваш сервер вручную, но пока оставьте настройки по умолчанию и автоподключение.

Далее, создайте тестовый кошелек – никогда не помещайте в этот кошелек средства. Цель этого тестового кошелька – пройти через программное обеспечение и убедиться, что все работает хорошо, прежде чем вы загрузите ваш настоящий кошелек. Мы пытаемся избежать случайной утечки конфиденциальности с настоящим кошельком. Если вы просто практикуетесь, созданный кошелек можно считать тестовым.

Вы можете оставить имя как “default_wallet” или изменить его на любое, которое вам нравится, и нажать далее. Позже, если у вас будет несколько кошельков, вы сможете найти и открыть их на этом этапе, сначала нажав “Выбрать…”

![image](assets/7.webp)

Выберите “Стандартный кошелек” и <Далее>:

![image](assets/8.webp)

Затем выберите “У меня уже есть seed”. Я не хочу, чтобы вы привыкли создавать seed Electrum, так как он использует свой собственный протокол, который не совместим с другими кошельками – вот почему мы не нажимаем “новый seed”.

![image](assets/9.webp)

Перейдите на https://iancoleman.io/bip39/ и создайте тестовый seed. Сначала измените количество слов на 12 (что является общепринятой практикой), затем нажмите “сгенерировать” и скопируйте слова в поле в буфер обмена.

![image](assets/10.webp)

Затем вставьте слова в Electrum. Вот пример:

![image](assets/11.webp)

Electrum будет искать слова, соответствующие его собственному протоколу. Нам нужно обойти это. Нажмите на опции и выберите BIP39 Seed:

![image](assets/12.webp)
Затем семя становится действительным. (До этого момента Electrum ожидал семя Electrum, поэтому это семя считалось недействительным). Прежде чем нажать далее, обратите внимание на текст, который говорит "Checksum OK". Это важно (для реального кошелька, который вы можете использовать позже), чтобы вы увидели это перед продолжением, так как это подтверждает действительность введенного вами семени. Предупреждение внизу можно игнорировать, это жалобы разработчиков Electrum на BIP39 и их "FUD'овые" утверждения о том, что их версия (которая не совместима с другими кошельками) является лучшей.

> Краткий обход для важного предупреждения. Цель контрольной суммы - убедиться, что вы ввели ваше семя без ошибок при наборе. Контрольная сумма - это последняя часть семени (12-е слово является словом контрольной суммы), которая математически определяется первой частью семени (11 слов). Если вы допустите ошибку в начале, слово контрольной суммы не будет математически совпадать, и программное обеспечение кошелька предупредит вас об этом. Это не означает, что семя нельзя использовать для создания функционального Bitcoin кошелька. Представьте, что вы создаете кошелек с ошибкой при наборе, загружаете в кошелек биткоины, а затем однажды вам может понадобиться восстановить кошелек, но при этом вы не повторяете ошибку при наборе - вы восстановите неправильный кошелек! Это довольно опасно, что Electrum позволяет вам продолжить создание кошелька, если ваша контрольная сумма недействительна, поэтому будьте осторожны, это ваша ответственность убедиться в этом. Другие кошельки не позволят вам продолжить, что намного безопаснее. Это одна из вещей, которые я имею в виду, когда говорю, что использовать Electrum можно, но нужно научиться им правильно пользоваться (разработчики Electrum должны исправить это).

Обратите внимание, что если вы хотите добавить парольную фразу, возможность выбрать это находится в этом окне опций, прямо вверху.

После нажатия ОК вы вернетесь к месту, где вводили фразу-семя. Если вы выбрали опцию парольной фразы, НЕ вводите ее вместе со словами семени (приглашение к этому появится далее).

Если вы не запросили парольную фразу, далее вы увидите этот экран - больше опций для типа вашего кошелька и пути производного ключа, о которых вы можете узнать здесь (https://armantheparman.com/public-and-private-keys/), но просто оставьте значения по умолчанию и продолжайте.

![изображение](assets/13.webp)

> Для дополнительной информации: Первая опция позволяет вам выбрать между устаревшими адресами (начинающимися с "1"), pay-to-script-hash (адреса начинаются с "3") или bech32/native segwit (адреса начинаются с "bc1q"). На момент написания Electrum еще не поддерживает taproot (адреса начинаются с "bc1p"). Вторая опция в этом окне позволяет вам изменить путь производного ключа. Я предлагаю вам никогда не изменять это, особенно не понимая, что это значит. Люди будут подчеркивать важность записи пути производного ключа, чтобы вы могли восстановить свой кошелек при необходимости, но если вы оставите его по умолчанию, скорее всего, все будет в порядке, так что не паникуйте - но все же хорошая практика записать путь производного ключа.

Далее вам будет предложено добавить ПАРОЛЬ. Это не следует путать с "ПАРОЛЬНОЙ ФРАЗОЙ". Пароль блокирует файл на вашем компьютере. Парольная фраза является частью структуры приватного ключа. Поскольку это демонстрационный кошелек, вы можете оставить поле пароля пустым и продолжить.

![изображение](assets/14.webp)
Вы получите всплывающее уведомление о новой версии (я предлагаю выбрать "нет"). Затем кошелек сгенерируется и будет готов к использованию (но помните, что этот кошелек предназначен для удаления, это всего лишь кошелек-заглушка).
![image](assets/15.webp)

Есть несколько вещей, которые я предлагаю вам сделать для настройки программного окружения (требуется только один раз):

### Измените единицы измерения на BTC

Перейдите в верхнее меню, инструменты –> настройки Electrum, и там, на вкладке "Общие", вы найдете опцию изменения "базовой единицы" на BTC.
Включите вкладки Адреса и Монеты

Перейдите в верхнее меню, просмотр, и выберите "показать адреса". Затем вернитесь в просмотр и выберите "показать монеты".

### Включите Oneserver

По умолчанию Electrum подключается к случайному узлу. Он также подключается к множеству других вторичных узлов. Я не уверен, какие данные обмениваются с этими вторичными узлами, но мы не хотим, чтобы это происходило, ради конфиденциальности. Даже если вы укажете узел, например, свой собственный узел, подключение к этим множественным другим узлам также будет происходить, и я не уверен, какая информация делится. Тем не менее, предотвратить это легко. Прежде чем я покажу вам, как указать свой собственный узел, мы заставим Electrum подключаться только к одному серверу за раз.

> Есть способ сделать это, указав "oneserver" из командной строки, но я не рекомендую этот способ. Я покажу альтернативу, которая, как мне кажется, проще в долгосрочной перспективе и с меньшей вероятностью позволит вам случайно подключиться к другим узлам.

Причина, по которой мы используем кошелек-заглушку, заключается в том, что если бы мы загрузили наш настоящий кошелек с нашими настоящими биткойнами, мы бы уже неосознанно подключились к случайному узлу (даже если мы выбрали "установить сервер вручную" в начале, он все равно подключается к этим другим вторичным узлам по какой-то причине (эй, разработчики Electrum, вам следует это исправить). Если бы наш кошелек был приватным, это была бы катастрофа.

Мы также не можем выполнить шаги, которые я покажу вам ниже, не загрузив сначала какой-либо кошелек. (Мы собираемся редактировать файл конфигурации, который заполняется и готов к редактированию только после загрузки кошелька).

**Закройте Electrum (ВАЖНО, если вы не сделаете это, следующие изменения, которые вы сделаете, будут стерты).**

### LINUX/MAC Файл конфигурации

Откройте терминал в Linux или Mac (инструкции для Windows будут даны позже):

Вы автоматически окажетесь в домашней папке. Оттуда перейдите в скрытую папку настроек electrum (это отличается от места, где находится приложение).

```bash
cd .electrum
```

Обратите внимание на точку перед "electrum", которая указывает, что это скрытая папка.

Другой способ попасть туда:

```bash
cd ~/.electrum
```

где "~" представляет путь к вашему домашнему каталогу. Вы можете увидеть полный путь текущего каталога с помощью команды "pwd".

Оказавшись в каталоге ".electrum", введите "nano config" и нажмите <enter>.

Текстовый редактор (nano) откроется с открытым файлом конфигурации. Мышь здесь работает не очень хорошо. Используйте стрелки для перемещения к строке, которая говорит:

```json
"oneserver": false,
```

Измените "false" на "true"; и не нарушайте синтаксис (не удаляйте запятую или точку с запятой).

Нажмите <ctrl> x, чтобы выйти, затем "y", чтобы сохранить, затем <enter>, что подтверждает сохранение без редактирования имени файла.
Теперь снова запустите Electrum. Затем нажмите на круг в правом нижнем углу, который открывает настройки сети. Затем, ближе к верху на вкладке обзора, вы увидите "подключено к 1 узлу" - это указывает на успех.
Чуть ниже вы увидите текстовое поле, и в нем будет адрес сервера. Вы в данный момент подключены к этому случайному узлу. Больше о подключении к узлу в следующем разделе.

### Файл конфигурации Windows

Найти файл конфигурации Windows немного сложнее. Директория: `C:/Users/Parman/AppData/Roaming/Electrum`

Очевидно, вам нужно изменить "Parman" на ваше собственное имя пользователя на компьютере.

В этой папке вы найдете файл конфигурации. Откройте его с помощью текстового редактора и отредактируйте строку:

```json
"oneserver": false,
```

Измените "false" на "true"; не нарушайте синтаксис (не удаляйте запятую или точку с запятой).

Затем сохраните файл и выйдите.

## Подключение Electrum к узлу

Далее, мы хотим подключить наш демонстрационный кошелек к узлу нашего выбора. Если вы не готовы запустить узел, вы можете сделать одно из следующего:

1. Подключиться к личному узлу друга (требуется Tor)
2. Подключиться к узлу доверенной компании
3. Подключиться к случайному узлу (не рекомендуется).

Кстати, вот инструкции по запуску вашего собственного узла, и вот причины, по которым вы должны это сделать (все учебные материалы в разделе узла или в наших бесплатных курсах)

### Подключение к узлу друга через Tor (Руководство скоро будет.)

### Подключение к узлу доверенной компании

Единственная причина для этого - если вам необходим доступ к блокчейну, и у вас нет доступа к собственному узлу (или узлу друга).

Давайте подключимся к узлу Bitaroo - нам сказали, что они не собирают данные. Это биржа только для Bitcoin, управляемая страстным биткойнером. Подключение к ним включает некоторое доверие, но это лучше, чем подключение к случайному узлу, который может быть компанией-наблюдателем.

Перейдите в настройки сети, нажав на круг в правой нижней части окна кошелька (красный указывает на отсутствие подключения, зеленый указывает на подключение, а синий указывает на подключение через Tor).

![image](assets/16.webp)

После того как вы нажмете на значок круга, появится всплывающее окно: ваш кошелек покажет "подключено к 1 узлу", поскольку мы это ранее принудительно установили.

Снимите флажок "выбрать сервер автоматически", а затем в поле сервера введите данные Bitaroo, как показано:

![image](assets/17.webp)

Закройте окно, и теперь мы должны быть подключены к узлу Bitaroo. Для подтверждения круг должен быть зеленым. Нажмите его снова и проверьте, что данные сервера не изменились обратно на случайный узел.

### Подключение к собственному узлу

Если у вас есть собственный узел, это замечательно. Если у вас есть только Bitcoin Core, а не Electrum SERVER, вы пока не сможете подключить Electrum WALLET к вашему узлу.

> Примечание: Electrum Server и Electrum Wallet - это разные вещи. Сервер - это программное обеспечение, необходимое для того, чтобы Electrum Wallet могла общаться с блокчейном Bitcoin - я не знаю, почему это было разработано таким образом - возможно, для скорости, но я могу ошибаться.
Если вы запускаете программный пакет узла, такой как MyNode (который я рекомендую для начинающих), Raspiblitz (рекомендуется по мере вашего развития) или Umbrel (лично я пока не рекомендую из-за множества проблем, с которыми столкнулся), то вы сможете подключить свой кошелек, просто введя IP-адрес компьютера (Raspberry Pi), на котором работает узел, затем двоеточие и 50002, как показано на изображении в предыдущем разделе. (Ниже я покажу вам, как найти IP-адрес вашего узла).

Откройте настройки сети (нажмите на зеленый или красный кружок в нижнем правом углу). Снимите галочку с пункта "выбрать сервер автоматически", затем введите ваш IP-адрес, как я сделал, ваш будет другим, но двоеточие и "50002" должны быть такими же.

![изображение](assets/18.webp)

Закройте окно, и теперь мы должны быть подключены к вашему узлу. Чтобы подтвердить, нажмите на кружок снова и проверьте, что детали сервера не вернулись к случайному узлу.

Иногда, несмотря на то, что все сделано правильно, подключение отказывается работать. Вот что можно попробовать...

- Обновите до более новой версии Electrum и программного обеспечения вашего узла
- Попробуйте удалить папку кэша в директории ".electrum"
- Попробуйте изменить порт с 50002 на 50001 в настройках сети
- Используйте это руководство для подключения через Tor как альтернативу (https://armantheparman.com/tor/)
- Переустановите Electrum Server на узле

## ПОИСК IP-АДРЕСА ВАШЕГО УЗЛА

IP-адрес - это не то, что обычный пользователь знает, как искать и использовать. Я помогал многим людям запустить узел, а затем подключить их кошельки к узлу - часто камнем преткновения оказывается поиск его IP-адреса.

Для MyNode вы можете ввести в окно браузера: `mynode.local`

Иногда "mynode.local" не работает (убедитесь, что вы не вводите его в строку поиска Google. Чтобы заставить строку навигации распознать ваш текст как адрес, а не поиск, предварите текст `http://` вот так: `http://mynode.local`. Если это не сработает, попробуйте с "s", вот так: `https://mynode.local`.

Это даст доступ к устройству, и вы можете нажать на ссылку настроек (см. мой синий "кружок" ниже), чтобы показать этот экран, где расположен IP-адрес:

![изображение](assets/19.webp)

Эта страница загрузится, и вы увидите IP узла (синий "кружок")

![изображение](assets/20.webp)

Затем, в будущем, вы можете ввести 192.168.0.150 или http://192.168.0.150 в ваш браузер.

Для Raspiblitz (когда не подключен экран), вам нужен другой метод (который также работает для MyNode):

Войдите на веб-страницу вашего роутера – здесь мы найдем IP-адрес всех ваших подключенных устройств. Веб-страница роутера будет IP-адресом, который вы вводите в веб-браузер. Мой выглядит так:

    http://192.168.0.1

Чтобы получить учетные данные для входа в роутер, вы можете посмотреть их в руководстве пользователя или иногда даже на стикере на самом роутере. Ищите имя пользователя и пароль. Если не можете найти, попробуйте User: "admin" Password: "password"

Если вам удастся войти, вы увидите ваши подключенные устройства и по их именам, возможно, будет ясно, какое из них ваш узел. IP-адрес будет там.
### Если первые два метода не сработают, последний будет работать, но это утомительно:
Сначала найдите IP-адрес любого устройства в вашей сети (подойдет текущий компьютер).

На Mac вы найдете его в настройках сети:

![изображение](assets/21.webp)

Нас интересуют первые 4 элемента (192.168.0), а не 4-й элемент, "166", который вы видите на изображении (у вас будет другой).

Для Linux используйте командную строку:

```bash
ifconfig | grep inet
```

Эта вертикальная линия - символ "pipe", и вы найдете его под клавишей <delete>. Вы увидите некоторый вывод и IP-адрес. (Игнорируйте 127.0.0.1, это не то, и игнорируйте маску подсети)

Для Windows откройте командную строку (cmd) и введите:

```bash
ipconfig/all
```

и нажмите Enter. IP-адрес можно найти в выводе.

Это была легкая часть. Трудная часть теперь - найти IP-адрес вашего узла - нам нужно угадать методом перебора. Допустим, например, IP-адрес вашего компьютера начинается с 192.168.0.xxx, тогда для вашего узла в браузере попробуйте: `https://192.168.0.2`

Самое маленькое возможное число - 2 (0 означает любое устройство, и 1 принадлежит роутеру), а самое большое, я полагаю, 255 (это случайно 11111111 в двоичном коде, самое большое число, которое может содержать 1 байт).

По одному, продвигайтесь вверх к 255. В конечном итоге вы остановитесь на правильном номере, который загрузит вашу страницу MyNode (или страницу RaspiBlitz). Тогда вы узнаете, какой номер ввести в настройки сети Electrum для подключения к вашему узлу.

Это будет выглядеть примерно так (убедитесь, что вы включили двоеточие и число после него):

![изображение](assets/22.webp)

> Полезно знать, что эти IP-адреса ВНУТРЕННИЕ для вашей домашней сети. Никто снаружи не может их видеть, и они не являются конфиденциальными. Это как внутренние телефонные номера в большой организации, направляющие вас к разным телефонам.

## Удалите фиктивный кошелек

Теперь мы успешно подключились к одному и только одному узлу. Так Electrum будет загружаться по умолчанию с этого момента. Теперь вам следует удалить фиктивный кошелек (Меню: файл -> удалить), на случай, если вы случайно отправите средства на этот небезопасный кошелек (Он небезопасен, потому что мы не создали его безопасным способом).

## Создайте практический кошелек

После удаления фиктивного кошелька начните сначала и создайте новый таким же образом, только на этот раз запишите слова семени и храните их в достаточной безопасности.

Это хорошая идея научиться использовать Electrum с этим практическим кошельком, без громоздкого аппаратного кошелька (необходимого для высокой безопасности). Положите в этот кошелек небольшое количество биткойнов - предполагайте, что вы потеряете эти деньги. Как только вы научитесь, тогда научитесь использовать Electrum с аппаратным кошельком.

В новом кошельке, который вы создали, вы увидите список адресов. Зеленые из них называются "адресами для получения". Они являются продуктом 3 вещей:

- Фраза-семя
- Парольная фраза
- Путь производной

Ваш новый кошелек имеет набор адресов для получения, которые могут быть математически и воспроизводимо созданы любым программным кошельком, который имеет семя, парольную фразу и путь производной. Их 4,3 миллиарда! Больше, чем вам понадобится. Electrum показывает вам только первые 20, а затем больше, по мере использования первых.
Больше информации о приватных ключах биткоина можно найти в этом руководстве.
![image](assets/23.webp)

Это сильно отличается от некоторых других кошельков, которые показывают только один адрес за раз.

Поскольку вы ввели сид-фразу при создании этого кошелька, Electrum имеет приватный ключ для каждого из адресов, и расходование средств с этих адресов возможно.

Также обратите внимание, что есть желтые адреса, называемые "адресами для сдачи" – это просто другой набор адресов из другой математической ветви (существует еще 4,3 миллиарда таких). Они используются кошельком для автоматической отправки излишков средств обратно в кошелек в виде сдачи. Например, если вы взяли 1,5 биткоина и потратили 0,5 у продавца, остаток в 1,0 должен куда-то уйти. Ваш кошелек отправит его на следующий пустой желтый адрес для сдачи – иначе эти средства уйдут к майнеру! Для получения дополнительной информации об этом (UTXO) смотрите это руководство. (https://armantheparman.com/utxo/)

Далее, вернитесь на сайт приватных ключей Ian Colman и введите сид (вместо генерации нового). Вы увидите ниже, что информация о приватном и публичном ключах изменится; все, что ниже, зависит от того, что указано выше на странице.

> Помните, вы никогда не должны вводить сид на компьютере для вашего реального биткоин-кошелька – вредоносное ПО может украсть его. Мы просто используем практический кошелек, для учебных целей, так что пока это нормально.

Прокрутите вниз и измените путь производного ключа на BIP84 (segwit), чтобы он соответствовал вашему кошельку Electrum, нажав на вкладку BIP84.

![image](assets/24.webp)

Ниже вы увидите расширенный приватный ключ учетной записи и расширенный публичный ключ учетной записи:

![image](assets/25.webp)

Перейдите в Electrum и сравните, что они совпадают. В верхнем меню есть пункт кошелек -> информация:

![image](assets/26.webp)

Появится это:

![image](assets/27.webp)

Обратите внимание, что два публичных ключа совпадают.

Далее, сравните адреса. Вернитесь на сайт Ian Coleman и прокрутите вниз:

![image](assets/28.webp)

Обратите внимание, что они совпадают с адресами в Electrum.

Теперь мы проверим адреса для сдачи. Прокрутите немного вверх до пути производного ключа и измените последнюю 0 на 1:

![image](assets/29.webp)

Теперь прокрутите вниз и сравните, что адреса совпадают с желтыми адресами в Electrum.

Зачем мы все это делали?

Мы взяли сид-фразу и пропустили ее через две разные независимые программы, чтобы убедиться, что они дают нам одинаковую информацию. Это значительно снижает риск того, что внутри прячется зловредный код, выдающий нам ложные приватные или публичные ключи или адреса.

Следующее, что нужно сделать, – это получить небольшой тестовый платеж и потратить его внутри кошелька с одного адреса на другой.

## Тестирование кошелька (Учимся им пользоваться)

Здесь я покажу вам, как получить UTXO на ваш кошелек, а затем переместить его (потратить) на другой адрес внутри кошелька. Это будет очень небольшая сумма, потерю которой мы не будем сожалеть.

Это имеет ряд целей.

- Это докажет, что у вас есть возможность тратить монеты в новом кошельке.
- Это продемонстрирует, как использовать программное обеспечение Electrum для совершения платежа (и некоторые его функции), прежде чем мы добавим дополнительную сложность для безопасности (использование аппаратного кошелька или компьютера без доступа в интернет).
- Это укрепит идею о том, что у вас есть множество адресов на выбор для получения и траты средств внутри одного и того же кошелька.
Откройте ваш тестовый кошелек Electrum и нажмите на вкладку "Адреса", затем щелкните правой кнопкой мыши по первому адресу и выберите "Копировать" -> "Адрес":
![image](assets/30.webp)

Теперь адрес сохранен в памяти вашего компьютера.

Теперь перейдите на биржу, где у вас есть некоторое количество биткоинов, и давайте выведем небольшое количество на этот адрес, скажем, 50 000 сатоши. Я в качестве примера использую Coinbase, поскольку это самая распространенная биржа, хотя они являются врагами Биткоина, и мне противно заходить в старый заброшенный аккаунт для этой цели.

Войдите в систему и нажмите кнопку "Отправить/Получить", которая на сегодняшний день находится в верхнем правом углу веб-страницы.

![image](assets/31.webp)

У меня, очевидно, нет средств на Coinbase, но просто представьте, что они здесь есть, и следуйте инструкциям: Вставьте адрес из Electrum в поле "Кому", как я это сделал. Вам также нужно будет выбрать сумму (я предлагаю около 50 000 сатоши). Не вводите "необязательное сообщение" – Coinbase и так собирает достаточно ваших данных (и продает их), не нужно им в этом помогать. Наконец, нажмите "Продолжить". Что будет дальше за всплывающие окна, я не знаю, вы на своем пути, но метод похож для всех бирж.

![image](assets/32.webp)

В зависимости от биржи, вы можете увидеть сатоши в вашем кошельке сразу же или с некоторой задержкой в часах/днях.

Обратите внимание, что Electrum покажет вам полученные монеты, даже если они не были подтверждены в блокчейне. Монеты, которые у вас есть, считываются из списка ожидания узла Биткоина, или "мемпула". Когда они попадут в блок, вы увидите средства как подтвержденные.

Теперь, когда у нас есть UTXO в нашем кошельке, мы должны его пометить. Только мы можем видеть эту метку, она никак не связана с общедоступным реестром. Все наши метки Electrum видны только на компьютере, который мы используем. Мы действительно можем сохранить файл и использовать его для восстановления всех наших меток на другом компьютере с тем же кошельком.

### Создайте метку для UTXO

Мне понадобилось пожертвование в этот тестовый кошелек, благодаря @Sathoarder за предоставление мне живого UTXO (10 000 сатоши), и другой человек (аноним) пожертвовал на тот же адрес (5000 сатоши). Обратите внимание, что на первом адресе баланс составляет 15 000 сатоши, и всего 2 транзакции (крайняя правая колонка). Внизу баланс составляет 10 000 сатоши подтвержденных и еще 5 000 сатоши не подтвержденных (все еще в мемпуле).

![image](assets/33.webp)

Теперь, если мы перейдем на вкладку "Монеты", мы можем увидеть две "полученные монеты" или UTXO. Обе они находятся на одном и том же адресе.

![image](assets/34.webp)

Возвращаясь к вкладке адреса, если вы дважды щелкнете по области "метки" рядом с адресом, вы сможете ввести некоторый текст, затем нажмите <enter>, чтобы сохранить:

![image](assets/35.webp)

Это хорошая практика, чтобы вы могли отслеживать, откуда пришли ваши монеты, являются ли они свободными от KYC или нет, и сколько стоил каждый UTXO (на случай, если вам нужно будет продать и рассчитать налог, который будет украден у вас вашим правительством).
В идеале следует избегать накопления множества монет на одном и том же адресе. Если вы всё же решите это сделать (но лучше не делайте этого), вы можете пометить каждую монету вместо того, чтобы маркировать их все одной и той же меткой, используя метод адреса. На самом деле, вы не можете перейти на вкладку "монеты" и отредактировать метки там (нет, это было бы слишком интуитивно!). Вам нужно перейти на вкладку История, найти транзакцию, пометить её, и только после этого вы увидите метки в разделе монет. Любые метки, которые вы видите в разделе монет, происходят из меток адресов ИЛИ меток истории, но любая метка истории перекрывает метку адреса. Чтобы сохранить ваши метки в файл, вы можете экспортировать их из меню в верхней части, кошелек–>метки–>экспорт.

Далее, давайте потратим монеты с первого адреса на второй адрес. Щелкните правой кнопкой мыши по первому адресу и выберите "потратить с" (На самом деле это не обязательно в данном сценарии, но представьте, что у нас много монет на многих адресах; используя эту функцию, мы можем заставить кошелек тратить только те монеты, которые мы хотим. Если мы хотим выбрать несколько монет на нескольких адресах, мы можем выбрать адреса с помощью левого клика мыши, удерживая клавишу команды, затем щелкнуть правой кнопкой мыши и выбрать "потратить с":

![image](assets/36.webp)

Как только вы это сделаете, в нижней части окна кошелька появится зеленая полоса, указывающая количество выбранных вами монет и общее доступное количество для траты.

Вы также можете тратить отдельные монеты внутри адреса и исключать другие на том же адресе, но это не рекомендуется, поскольку вы оставляете монеты на адресе, который был криптографически ослаблен из-за траты одной из монет (еще одна причина не класть несколько монет на один адрес, помимо приватности, заключается в том, что если вы тратите одну, вам следует потратить их все, что становится ненужно дорого). Вот как выбрать одну монету с общего адреса, но лучше этого не делать:

![image](assets/37.webp)

Теперь у нас выбраны две монеты для траты. Далее, мы решаем, куда их потратить. Давайте отправим их на второй адрес. Нам нужно скопировать адрес вот так:

![image](assets/38.webp)

Затем перейдите на вкладку "Отправить", и вставьте второй адрес в поле "платеж на". Нет необходимости добавлять описание; вы могли бы, но это можно сделать позже, редактируя метки. Для суммы выберите "Макс", чтобы потратить все выбранные монеты. Затем нажмите "Оплатить", а затем нажмите кнопку "дополнительно" в появившемся всплывающем окне.

![image](assets/39.webp)

Всегда нажимайте "дополнительно" на этом этапе, чтобы мы могли тонко настроить и проверить, что именно находится в транзакции. Вот транзакция:

![image](assets/40.webp)

Мы видим два внутренних белых окна/панели. Верхняя - это окно входов (какие монеты тратятся), а нижняя - это выходы (куда идут монеты).

Обратите внимание, статус (вверху слева) пока что "неподписанный". "Отправленная сумма" равна 0, потому что монеты переводятся внутри кошелька. Комиссия составляет 481 сат. Обратите внимание, что если бы это было 480 сат, последний ноль был бы убран, вот так, 0.0000048, и для уставшего глаза это может выглядеть как 48 сат – будьте внимательны (это что-то, что разработчикам Electrum следует исправить).
Размер транзакции относится к размеру данных в байтах, а не к количеству биткойнов. Функция "замена через комиссию" активирована по умолчанию и позволяет вам повторно отправить транзакцию с более высокой комиссией, если это необходимо. LockTime позволяет вам настроить, когда транзакция будет действительна – я ещё не экспериментировал с этим, но советую не использовать его, если вы полностью не понимаете, что делаете, и не попрактиковались с небольшими суммами.

Внизу у нас есть некоторые продвинутые инструменты для настройки комиссии за майнинг. Всё, что вам нужно сделать для внутренних переводов, это установить минимальную комиссию в 1 sat/byte. Просто вручную введите число в поле Target fee. Чтобы проверить подходящую комиссию для внешнего платежа, вы можете проконсультироваться с https://mempool.space, чтобы увидеть, насколько занят mempool, и некоторые предложенные комиссии отображаются.

![image](assets/41.webp)

Я выбрал 1 sat/byte.

В окне ввода мы видим две записи. Первая – это пожертвование в 5000 sat. Слева мы видим его хеш-транзакции (который мы можем посмотреть в блокчейне). Рядом с ним находится "21" – это указывает на то, что это выход с меткой 21 в этой транзакции (на самом деле это 22-й выход, потому что первый помечен нулём).

Здесь стоит отметить: UTXO существуют только внутри транзакции. Чтобы потратить UTXO, мы должны ссылаться на него и поместить эту ссылку во вход новой транзакции. Выходы затем становятся новыми UTXO, а старый UTXO становится STXO (Spent transaction output – потраченный выход транзакции).

Вторая строка – это пожертвование в 10 000 sat. Рядом с хешем транзакции, из которой оно поступило, стоит "0", потому что это первый (и возможно единственный) выход для этой транзакции.

В нижнем окне мы видим наш адрес. Обратите внимание, что общая сумма входов биткойнов не совсем совпадает с общей суммой выходов. Разница идет майнеру. Майнер смотрит на разницу во всех транзакциях в блоке, который он пытается добыть, и добавляет это число к своей награде. (Таким образом, комиссии за майнинг полностью отделены от цепочки транзакций и начинают новую жизнь).

Если мы настроим комиссию за майнинг, значение выхода автоматически изменится.

> Стоит отметить здесь: Обратите внимание на цвет адресов в окне транзакции. Помните, что зеленые адреса перечислены в вашей вкладке адресов. Если адрес выделен зеленым (или желтым) цветом в окне транзакции, то Electrum распознал адрес как свой. Если адрес не выделен, то это внешний адрес (внешний по отношению к текущему открытому кошельку), и вы должны проверить его с особой осторожностью.

После того как вы проверите всё в транзакции и убедитесь, что вы довольны тем, какие монеты вы тратите и куда идут монеты, вы можете нажать "finalise".

![image](assets/42.webp)

После того как вы нажмете "finalise", вы больше не сможете вносить правки – если вам нужно, вам придется закрыть это и начать снова. Обратите внимание, что кнопка "finalise" изменилась на "export", и появились новые кнопки: "save", "combine", "sign" и "broadcast". Кнопка "broadcast" неактивна, потому что транзакция не подписана и на данном этапе недействительна.

После того как вы нажмете sign, если у вашего кошелька есть пароль, вас попросят его ввести, а затем статус (вверху справа) изменится с "Unsigned" на "Signed". Тогда кнопка "Broadcast" станет доступной.
После того, как вы осуществите трансляцию, вы можете закрыть окно транзакции. Если вы перейдете на вкладку адресов, то увидите, что первый адрес пуст, а на втором адресе находится 1 UTXO.
Примечание: Вы увидите все эти изменения даже до того, как транзакция будет добыта в блок или "подтверждена". Это потому, что Electrum обновляет балансы/транзакции, основываясь не только на данных блокчейна, но и на данных мемпула. Не все кошельки делают это.

Стоит отметить, что вместо трансляции мы можем сохранить транзакцию на потом. Ее можно сохранить либо в неподписанном, либо в подписанном состоянии.

Нажмите кнопку "export" (парадоксально, НЕ нажимайте кнопку "save"), и вы увидите несколько вариантов. Транзакция кодируется текстом, и поэтому ее можно сохранить несколькими способами.

![изображение](assets/43.webp)

Сохранение в QR-код очень интересно. Если вы выберете это, QR-код появится:

![изображение](assets/44.webp)

Затем вы можете сфотографировать QR-код. С этим можно сделать много чего, но пока давайте скажем, что вы загружаете его обратно в кошелек позже. Вы можете закрыть Electrum, загрузить кошелек снова и перейти в меню Инструменты:

![изображение](assets/45.webp)

Это активирует камеру вашего компьютера. Затем вы показываете камере фотографию QR-кода на вашем телефоне, и это загрузит транзакцию обратно, точно так же, как вы ее оставили.

Неинтуитивно понятно, как загрузить сохраненные транзакции, поэтому обратите особое внимание. Загрузка транзакции не является "инструментом", но опция скрыта в меню инструментов (еще одна вещь, которую разработчики Electrum должны исправить).

Аналогичный процесс возможен с транзакцией, сохраненной как файл. Попробуйте попрактиковаться любым из этих методов внутри одного кошелька. Здесь я не буду это описывать, но вы можете использовать эту функцию, чтобы передавать транзакцию между одним и тем же кошельком на разных компьютерах, между мультиподписными кошельками, а также между аппаратными кошельками. Вот некоторые инструкции.

Теперь, возвращаясь к кнопке "save" – это не способ сохранения текста транзакции. На самом деле это говорит кошельку Electrum распознать эту транзакцию на локальном компьютере как поданную в качестве платежа. Если вы сделаете это случайно, вы увидите транзакцию с маленьким значком компьютера. Вы можете щелкнуть правой кнопкой мыши и удалить транзакцию – не волнуйтесь, вы не можете таким образом удалить биткойны. Electrum затем "забудет", что эта транзакция когда-либо произошла, и "вернет" сатоши обратно, отображая сатоши в правильном месте, где они на самом деле находятся.

### Адреса для сдачи

Адреса для сдачи представляют интерес. Вам нужно понимать UTXO, чтобы понять это объяснение. Если вы отправляете на адрес сумму, которая меньше UTXO, то оставшиеся биткойны уйдут майнеру, если не указан выход для сдачи.

У вас может быть UTXO в 6.15 биткойна, и вы хотите потратить 0.15 биткойна, чтобы пожертвовать некоторым протестующим, подавляемым тираническим "демократическим" правительством где-то в мире. Тогда вы возьмете 6.15 биткойна (используя функцию "spend from" в Electrum), и поместите их в транзакцию.

Вы вставите адрес протестующих в поле "pay to", возможно, вы вставите "EndTheFed & WEF" в поле "description", и для суммы вы укажете 0.15 биткойна и нажмете "pay", затем "advanced".
На экране транзакции, в окне ввода, вы увидите UTXO в 6.15 биткоина. В окне вывода вы увидите адрес без выделения (это адрес протестующих) с 0.15 биткоина рядом. Также вы увидите желтый адрес с чуть меньше чем 6.0 биткоина. Это адрес для сдачи, который автоматически выбирается кошельком из одного из его собственных желтых адресов для сдачи. Цель адреса для сдачи заключается в том, чтобы кошелек мог помещать на них монеты сдачи, не нарушая доступность адресов для получения, которые вы могли запланировать использовать или по которым выслали счета. Если они будут использоваться позже клиентами, например, вы не хотите, чтобы ваш кошелек автоматически использовал их и заполнял их. Это непрактично и плохо для конфиденциальности.
Обратите внимание, что когда вы корректируете комиссию за майнинг, сумма сдачи будет автоматически корректироваться, а не сумма платежа.

### Ручное изменение или оплата нескольким получателям

Это действительно интересная функция Electrum. Доступ к ней осуществляется так.

![изображение](assets/46.webp)

Затем вы можете ввести несколько назначений для баланса UTXO, которым вы распоряжаетесь, вот так:

![изображение](assets/47.webp)

Вставьте адрес, введите запятую, затем пробел, затем сумму, затем <enter>, и повторите снова. НЕ ВВОДИТЕ СУММЫ В ОКНА "СУММА" – Electrum будет заполнять общую сумму по мере того, как вы вводите отдельные суммы в окно "Оплатить".

Это позволяет вам вручную определить, куда пойдет сдача (например, на конкретный адрес в вашем кошельке или в другой кошелек), или вы можете оплатить сразу нескольким людям. Если ваша общая сумма недостаточно велика, чтобы соответствовать размеру UTXO, Electrum все равно создаст для вас дополнительный вывод сдачи.

Функция "Оплатить нескольким" также позволяет создавать свои собственные "PayJoins" или "CoinJoins" – это выходит за рамки данной статьи, но у меня есть руководство здесь. (https://armantheparman.com/cj/)

## Кошельки

Я хочу продемонстрировать использование кошелька только для просмотра с помощью Electrum. Для этого мне сначала нужно определить, что такое "кошелек". В Bitcoin существует два способа использования слова "кошелек":

- Тип A, "кошелек" – относится к программному обеспечению, которое показывает ваши адреса и балансы, например, Electrum, Blue Wallet, Sparrow Wallet и т.д.

- Тип B, "кошелек" – относится к уникальному набору адресов, которые ассоциированы с комбинацией нашего seed-фразы/парольной фразы/пути производного ключа. В любом кошельке есть 8.6 миллиарда адресов (4.3 миллиарда адресов для получения и 4.3 миллиарда адресов для сдачи). Если вы измените что-либо в seed-фразе, парольной фразе или пути производного ключа, вы получите неиспользованный кошелек с новыми и уникальными 8.6 миллиардами пустых адресов.

Какой тип кошелька имеется в виду при использовании слова "кошелек", очевидно из контекста.

## Кошелек только для просмотра – упражнение

Не совсем очевидно, для чего нужен кошелек только для просмотра, но я начну с объяснения того, что это такое, как сделать практический пример, а затем мы вернемся к его назначению позже, когда я расскажу больше о аппаратных кошельках. (Для подробного обзора использования аппаратного кошелька и различных конкретных брендов смотрите здесь.)
Мы собираемся создать простой обычный кошелек (на этот раз добавив немного сложности с помощью парольной фразы), а затем соответствующий наблюдающий кошелек. Если хотите, можете скопировать тот, который я создал, или создать свой – этот кошелек будет отброшен; не используйте его на самом деле. Начните с генерации 12-словной сид-фразы на сайте Ian Coleman.
Обратите внимание на 12 случайных слов на скриншоте ниже, и что я ввел парольную фразу в соответствующее поле:

ПАРОЛЬНАЯ ФРАЗА: “Craig Wright is a liar and a fraud and belongs in jail. Also, Ross Ulbricht should be released from prison immediately.”

Парольная фраза может быть до 100 символов в длину и, идеально, должна быть однозначной и не слишком короткой – Та, которую я использовал, просто для развлечения – я обычно советую избегать использования заглавных букв и символов, чтобы уменьшить ваш стресс при попытках комбинаций, если когда-либо возникнут проблемы с запоминанием вашей парольной фразы.

![image](assets/48.webp)

Далее, в Electrum, перейдите в меню файл–>новый/восстановить. Введите уникальное имя, чтобы создать новый кошелек, и нажмите "далее".

![image](assets/49.webp)

Следующие шаги вам уже должны быть знакомы, поэтому я перечислю их без картинок:

- Стандартный кошелек
- У меня уже есть сид
- Скопируйте и вставьте 12 слов в поле или введите их вручную.
- Нажмите на опции и выберите BIP39, а также отметьте галочку парольной фразы ("расширить этот сид собственными словами")
- Введите вашу парольную фразу точно так же, как вы делали на странице Ian Coleman
- Оставьте стандартные семантику скрипта и путь производной
- Нет необходимости добавлять пароль (блокирует кошелек)

Теперь вернитесь на сайт Ian Coleman, прокрутите вниз до раздела "путь производной", и нажмите на вкладку "BIP 84", чтобы выбрать те же семантику скрипта, что и по умолчанию в Electrum (Native Segwit).

![image](assets/50.webp)

Расширенные приватный и публичный ключи находятся чуть ниже, и они изменяются, когда вы делаете изменения в пути производной (или что-то еще выше на странице).

![image](assets/51.webp)

Вы также увидите "расширенные приватный/публичный ключи BIP32" – их пока игнорируем.

Расширенный приватный ключ учетной записи может быть использован для полного восстановления вашего кошелька. Однако расширенный публичный ключ учетной записи может произвести только ограниченную версию того же кошелька (наблюдающий кошелек) – Если вы введете этот ключ в Electrum, он все равно произведет все 8,6 миллиарда адресов, которые мог бы сид или расширенный приватный ключ, но в Electrum не будет доступных приватных ключей, поэтому расходование средств невозможно. Давайте сделаем это сейчас, чтобы продемонстрировать:

Скопируйте "расширенный публичный ключ учетной записи" в буфер обмена.

Затем перейдите в Electrum, оставьте открытым текущий кошелек, который мы создали, и перейдите в файл–>новый/восстановить. Процесс создания кошелька немного отличается от предыдущего:

- Стандартный кошелек
- Использовать мастер-ключ
- Вставьте расширенный публичный ключ в поле и продолжите
- Нет необходимости вводить парольную фразу; она уже является частью расширенного публичного ключа
- Нет необходимости вводить семантику скрипта и путь производной
- Нет необходимости добавлять пароль (блокирует кошелек)

Когда кошелек загрузится, вы должны заметить, что загружены точно такие же адреса, как и ранее, когда был введен сид. Вы также должны заметить в самом верху в заголовке, что написано "наблюдающий кошелек". Этот кошелек может показывать ваши адреса и балансы (проверяя балансы через узел), но вы не можете ПОДПИСЫВАТЬ транзакции (потому что у наблюдающего кошелька нет приватных ключей).
Тогда в чем смысл всего этого?
Одна из причин, и не главная, заключается в том, что вы потенциально можете наблюдать за своим кошельком и его балансом на компьютере, не подвергая свои приватные ключи риску заражения вредоносным ПО на компьютере.

Другая причина заключается в том, что это НЕОБХОДИМО для совершения платежей, если вы решите хранить свои приватные ключи вне компьютера; я объясню:

> Аппаратные кошельки (HWW) были созданы для того, чтобы устройство могло безопасно хранить ваши приватные ключи (защищенные PIN-кодом), никогда не передавая ключи на компьютер (даже при подключении к компьютеру через кабель), и при этом сами устройства не могут подключаться к интернету. Такое устройство не может самостоятельно совершать транзакции, поскольку все биткойн-транзакции начинаются с ссылки на UTXO(s) в блокчейне (который находится на узле). Кошелек должен указать, в каком транзакционном ID находится UTXO, и какой из выходов транзакции будет использован. Только после указания входа можно создать новую транзакцию, не говоря уже о ее подписании. Аппаратные кошельки не могут создавать транзакции, потому что у них нет доступа к каким-либо UTXO – они не подключены ни к чему! Обычно из HWW извлекается расширенный публичный ключ, и затем адреса отображаются на компьютере – многие люди знакомы с программным обеспечением Ledger или Trezor Suite, которые показывают адреса и балансы на их компьютере – это наблюдающий кошелек. Эти программы могут создавать транзакции, но не могут их подписывать. Они могут только получать подписанные транзакции от HWW, которые подключены к ним. HWW берет вновь созданную транзакцию из наблюдающего кошелька, подписывает ее, а затем отправляет обратно на компьютер для трансляции на узел. HWW не может самостоятельно транслировать, это делает связанный с ним наблюдающий кошелек. Таким образом, два кошелька (кошелек с публичным ключом на компьютере и кошелек с приватным ключом в HWW) сотрудничают для генерации, подписи и трансляции, при этом обеспечивая, что приватные ключи остаются изолированными и вдали от устройства, подключенного к интернету.

## Частично подписанные биткойн-транзакции (PSBT)

Возможно создать транзакцию и сохранить ее в файл, затем перезагрузить, подписать, сохранить, снова перезагрузить и, наконец, транслировать – я не говорю, что кому-то обязательно нужно это делать; это просто возможность.

Теперь рассмотрим кошелек с мультиподписью 3 из 5 – для создания кошелька нужно 5 приватных ключей, и 3 из них необходимы для полной подписи транзакции (Смотрите здесь, чтобы узнать больше о ключах кошелька с мультиподписью). Возможно иметь 5 разных компьютеров, каждый с одним из пяти приватных ключей.

Компьютер один может генерировать транзакцию и подписывать ее. Затем он может сохранить ее в файл и отправить по электронной почте на Компьютер 2. Компьютер 2 может подписать ее и потенциально сохранить файл в QR-код, а затем передать QR через Zoom-вызов Компьютеру 3 на другом конце мира. Компьютер 3 может захватить QR, загрузить транзакцию в Electrum и подписать транзакцию. После первых двух подписей транзакция стала PSBT (частично подписанной биткойн-транзакцией). После третьей подписи транзакция стала полностью подписанной и действительной, готовой к трансляции.

Чтобы узнать больше о PSBT, смотрите это руководство. (https://armantheparman.com/psbt/)

## Использование аппаратных кошельков с Electrum

У меня есть руководство по использованию аппаратных кошельков в целом, которое, как мне кажется, было бы важно прочитать людям, новым в использовании HWW. (https://armantheparman.com/using-hwws/)
Также есть руководства по различным брендам аппаратных кошельков HWW, которые можно подключить к Sparrow Bitcoin Wallet. Их можно найти здесь. (https://armantheparman.com/hwws/)
Это будет мое первое руководство, показывающее, как использовать аппаратный кошелек с Electrum – я собираюсь использовать аппаратный кошелек ColdCard в качестве примера. Это не должно рассматриваться как подробное руководство по ColdCard, такое руководство находится здесь. Я просто показываю моменты, специфичные для Electrum. (https://armantheparman.com/cc/)

### Подключение через карту micro SD (воздушный зазор)

Перед подключением вашего реального кошелька через ColdCard, я надеюсь, что вы прошли предыдущие шаги по загрузке демонстрационного кошелька Electrum и настройке сетевых параметров.

Затем вставьте SD-карту в ColdCard. Я предполагаю, что вы уже создали свой seed. Если вы получаете доступ к кошельку с помощью парольной фразы, примените ее сейчас. Прокрутите вниз и выберите меню Advanced/Tools –> Export Wallet –> Electrum Wallet.

Вы можете прокрутить вниз и прочитать сообщение. Оно всегда предлагает вам выбрать “1”, чтобы ввести номер счета, отличный от нуля (что-то, что является частью пути производной), но если вы следовали моему совету, вы не вмешивались в стандартные пути производных, поэтому вам не нужен номер счета, отличный от нуля; просто нажмите галочку, чтобы продолжить.

Затем выберите семантику скрипта. Большинство людей будет выбирать “Native Segwit”.

Появится сообщение “Electrum wallet file written”, и будет отображено имя файла. Запомните его.

Затем извлеките карту micro SD и вставьте ее в компьютер с Electrum.

Некоторые операционные системы автоматически открывают проводник файлов, когда вы вставляете карту microSD. Многие люди увидят новый файл кошелька и дважды щелкнут по нему, задаваясь вопросом, почему это не работает. Это не очень удачный дизайн. На самом деле, вам нужно игнорировать проводник файлов (закрыть его) и открыть файл кошелька с помощью Electrum:

Откройте Electrum. Если он уже открыт с каким-то другим кошельком, выберите файл –> новый. Мы ищем это окно:

![image](assets/52.webp)

Вот трюк, это не интуитивно понятно. Нажмите “выбрать”. Затем перейдите по файловой системе на карте microSD и найдите файл кошелька и откройте его.

Теперь вы открыли соответствующий кошелек для наблюдения вашего аппаратного кошелька. Отлично.

### Подключение через USB-кабель.

Этот способ должен быть проще, но для компьютеров с Linux это гораздо сложнее. Необходимо обновить что-то, называемое "правилами Udev". Вот как (подробное руководство https://armantheparman.com/gpg-articles/ ), и вкратце:

Хорошая идея - убедиться, что система обновлена. Затем:

```bash
sudo apt-get install libusb-1.0-0-dev libudev-dev
```

затем...

```bash
python3 -m pip install ckcc-protocol
```

Если возникает ошибка, убедитесь, что pip установлен. Вы можете проверить это с помощью (pip –version), и вы можете установить его с помощью (sudo apt install python3-pip)

Создайте или измените существующий файл, /etc/udev/rules.d/

Вот так:

```bash
sudo nano /etc/udev/rules.d
```

Откроется текстовый редактор. Скопируйте текст отсюда и вставьте его в файл rules.d, сохраните и выйдите.

![image](assets/53.webp)

Затем выполните эти команды одну за другой:

```bash
sudo groupadd plugdev
sudo usermod -aG plugdev $(whoami)
sudo udevadm control –reload-rules && sudo udevadm trigger
```
Если вы получите сообщение "группа plugdev уже существует", это нормально, продолжайте. После второй команды вы не получите обратной связи/ответа, просто переходите к третьей команде.
Вам может потребоваться отключить и затем снова подключить ColdCard к компьютеру.

Если после всего этого вы все еще не можете подключить ColdCard, я бы попробовал обновить прошивку (руководство скоро будет, но пока вы можете найти инструкции на сайте производителя).

Далее, создайте новый кошелек:

- Стандартный кошелек
- Использовать аппаратное устройство
- Оно будет сканировать и обнаруживать ваш ColdCard. Продолжайте.
- Выберите семантику скрипта и путь производного ключа
- Решите, следует ли шифровать файл кошелька (рекомендуется)

### Транзакции с использованием ColdCard

С подключенным кабелем транзакции проходят легко. Подписание транзакций будет беспрепятственным.

Если использовать устройство в режиме без подключения к сети, вам вручную придется передавать сохраненную транзакцию между устройствами с помощью карты microSD. Есть некоторые хитрости.

После создания транзакции и ее финализации вам нужно нажать кнопку экспорта в нижнем левом углу. Вы увидите "сохранить в файл", что контринтуитивно, не то, что нам нужно. Сначала вам действительно нужно перейти к самому последнему пункту меню, который говорит "для аппаратных кошельков", и затем, из этого выбора, найти другой "сохранить в файл" и выбрать его. Затем сохраните файл на карту microSD, выньте карту и вставьте в ColdCard. Помните, что вам может потребоваться применить парольную фразу, чтобы выбрать правильный кошелек. На экране будет написано готово к подписи. Нажмите галочку, осмотрите транзакцию и продолжайте, подтверждая галочкой. Как только это будет сделано, выньте карту и снова вставьте ее в компьютер.

Затем нам нужно открыть транзакцию с помощью Electrum. Функция скрыта в меню инструменты -> загрузить транзакцию. Перейдите по файловой системе и найдите файл. Каждый раз, когда вы подписываете, будет три файла. Оригинальный сохраненный файл, который создал Watching Wallet, и два, созданных ColdCard (не знаю, почему он это делает). Один будет с надписью "подписано", а другой - "финал". Это не интуитивно понятно, но "подписанный" нам не нужен, нам нужно открыть "финальную" транзакцию.

После загрузки вы можете нажать "транслировать", и платеж будет совершен.

## Обновление Electrum и скрытая директория ".electrum"

Electrum находится на вашем компьютере в двух местах. Это само приложение и скрытая папка конфигурации. Эта папка находится в разных местах в зависимости от вашей операционной системы:

Windows:

> C:/Users/your_user_name_goes_here/AppData/Roaming/Electrum

Mac:

> /Users/your_user_name_goes_here/.electrum

Linux:

> /home/your_user_name_goes_here/.electrum

Обратите внимание, что перед "electrum" в Linux и Mac стоит точка – это указывает на то, что директория скрыта. Также обратите внимание, что эта директория создается (автоматически) только после первого запуска Electrum. Директория содержит файл конфигурации electrum, а также папку, в которой хранятся все ваши сохраненные кошельки.

Если вы удалите программу Electrum с вашего компьютера, скрытая директория останется, если вы активно не удалите ее тоже.
Чтобы обновить Electrum, следует пройти тот же процесс, который я описал в начале, чтобы скачать и проверить программу. После этого у вас будет две копии программы на компьютере, и вы можете запускать любую из них – каждая программа будет иметь доступ к одной и той же скрытой папке electrum для своей конфигурации и доступа к кошелькам. Все, что мы сохранили, например, базовую единицу, узел по умолчанию для подключения, другие настройки и доступ к кошелькам, останется без изменений, поскольку все это сохраняется в этой папке.

### Перенос вашего Electrum и кошельков на другой компьютер

Для этого вы можете скопировать файлы программы на USB-накопитель, а также скопировать директорию .electrum. Затем скопируйте или переместите их на новый компьютер. Вам не нужно будет снова проверять программу. Убедитесь, что вы скопировали директорию .electrum в местоположение по умолчанию (помните, что нужно скопировать её ПЕРЕД первым запуском Electrum на этом компьютере, иначе будет создана пустая папка .electrum по умолчанию, и это может вызвать путаницу).

## Метки

Как я ранее объяснял, на вкладке адреса есть колонка с метками. Вы можете дважды щелкнуть по ней и ввести заметки для себя (они хранятся только на вашем компьютере, не являются публичными и не записываются в блокчейн).

![image](assets/54.webp)

Когда вы переносите ваш кошелек Electrum на другой компьютер, вы можете не захотеть терять все эти заметки. Вы можете сделать их резервную копию в файл, используя меню, кошелек–> метки –> экспорт, а затем на новом компьютере использовать кошелек–> метки –> импорт.

## Советы:

Если вы находите этот ресурс полезным и хотели бы поддержать то, что я делаю для Bitcoin, вы можете пожертвовать некоторое количество сатоши здесь:

Статический Lightning адрес: dandysack84@walletofsatoshi.com
https://armantheparman.com/electrum/